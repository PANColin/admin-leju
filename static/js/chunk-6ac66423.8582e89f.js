(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ac66423"],{"0346":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("detail",{ref:"editRoles",attrs:{logo:e.editRoles.logo,bigImg:e.editRoles.bigPic,editRoles:e.editRoles},on:{refrush:e.getBrandList}}),r("el-card",{staticStyle:{width:"95%",margin:"20px auto"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增")]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",stripe:"",fit:"",data:e.list}},[r("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",fixed:"left"}}),r("el-table-column",{attrs:{align:"center",prop:"roleName",label:"角色名称",width:"160"}}),r("el-table-column",{attrs:{align:"center",prop:"roleCode",label:"角色编码",width:"100"}}),r("el-table-column",{attrs:{align:"center",prop:"remark",label:"备注","show-overflow-tooltip":"",width:"300"}}),r("el-table-column",{attrs:{align:"center",prop:"modifyTime",label:"修改日期",width:"180"}}),r("el-table-column",{attrs:{align:"center",prop:"createTime",label:"添加时间",width:"180"}}),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.edit(t.row)}}},[e._v("编辑")]),r("el-popconfirm",{attrs:{title:"亲,您确定要删除吗？"},on:{onConfirm:function(r){return e.del(t.row)}}},[r("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),r("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.pageInfo.start,"page-sizes":[5,10,15,20],"page-size":e.pageInfo.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.SizeChange,"current-change":e.CurrentChange}})],1),r("copyright")],1)},a=[],s=r("1da1"),n=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dialog-detail"},[r("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"addRoleForm",attrs:{model:e.addRoleForm,rules:e.rules}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{label:"角色名称","label-width":e.formLabelWidth,prop:"roleName"}},[r("el-input",{attrs:{placeholder:"请输入角色名称",autocomplete:"off"},model:{value:e.addRoleForm.roleName,callback:function(t){e.$set(e.addRoleForm,"roleName",t)},expression:"addRoleForm.roleName"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{label:"角色编码","label-width":e.formLabelWidth,prop:"roleCode"}},[r("el-input",{attrs:{placeholder:"请输入角色编码",autocomplete:"off"},model:{value:e.addRoleForm.roleCode,callback:function(t){e.$set(e.addRoleForm,"roleCode",t)},expression:"addRoleForm.roleCode"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-form-item",{attrs:{label:"角色描述",prop:"remark","label-width":e.formLabelWidth}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入角色描述"},model:{value:e.addRoleForm.remark,callback:function(t){e.$set(e.addRoleForm,"remark",e._n(t))},expression:"addRoleForm.remark"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-form-item",{attrs:{label:"选择菜单","label-width":e.formLabelWidth}},[r("el-col",{attrs:{span:24,offset:0}},[r("el-row",{staticClass:"self-item",attrs:{gutter:20}},[r("el-col",{attrs:{span:8,offset:0}},[r("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#999","active-text":"展开","inactive-text":"关闭","active-value":!0,"inactive-value":!1},on:{change:e.menuChange},model:{value:e.isExtend,callback:function(t){e.isExtend=t},expression:"isExtend"}})],1),r("el-col",{attrs:{span:8,offset:0}},[r("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#999","active-text":"全选","inactive-text":"取消全部权限","active-value":!0,"inactive-value":!1},on:{change:e.handleTreeChange},model:{value:e.isAll,callback:function(t){e.isAll=t},expression:"isAll"}})],1)],1),r("el-tree",{ref:"tree",attrs:{data:e.menu,"show-checkbox":"","default-expand-all":e.isExtend,"node-key":"id","highlight-current":"",props:e.defaultProps}})],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.doSave}},[e._v("确 定")])],1)],1)],1)}),o=[],l=(r("99af"),r("159b"),r("1f91")),c=r("daea"),u=r("8454"),d={components:{UploadImg:l["a"]},props:{editRoles:{type:Object,default:function(){return{}}},bigImg:{type:String,default:""}},computed:{},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["a"])();case 2:if(r=t.sent,i=r.success,a=r.data,s=r.message,i){t.next=8;break}return t.abrupt("return",e.$message.error(s));case 8:e.menu=a.menus;case 9:case"end":return t.stop()}}),t)})))()},data:function(){return{isExtend:!1,isAll:!1,defaultProps:{children:"children",label:"title"},checkedKeys:[],menu:[],addRoleForm:{},dialogVisible:!1,formLabelWidth:"130px",rules:{roleName:[{required:!0,message:"角色名称不能为空",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],roleCode:[{required:!0,message:"角色编码不能为空",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],remark:[{required:!0,message:"备注不能为空",trigger:"blur"},{min:2,max:80,message:"长度在 2到 80 个字符",trigger:"blur"}]}}},methods:{handleTreeChange:function(e){this.isAll=e,this.isAll?this.$refs.tree.setCheckedNodes(this.menu):this.$refs.tree.setCheckedNodes([])},menuChange:function(e){this.isExtend=e;for(var t=0;t<this.$refs.tree.store._getAllNodes().length;t++)this.$refs.tree.store._getAllNodes()[t].expanded=this.isExtend},clearAll:function(){var e=this;this.addRoleForm={},this.isAll=!1,this.$nextTick((function(){e.$refs.tree.setCheckedNodes([])}))},handleClose:function(){this.dialogVisible=!1},getCheckedKey:function(){var e=this.$refs.tree.getHalfCheckedKeys(),t=this.$refs.tree.getCheckedKeys(),r=t.concat(e);return r},doSave:function(){var e=this;this.addRoleForm.permissionIds=this.getCheckedKey(),this.$refs.addRoleForm.validate((function(t){if(!t)return e.$message.warning("请检查是否输入有误"),!1;e.dialogVisible=!1,e.$emit("refrush",e.addRoleForm)}))},checked:function(e,t){var r=this;t.forEach((function(t){t.id===e?0===t.children.length&&r.checkedKeys.push(t):t.hasOwnProperty("children")&&0!==t.children.length&&r.checked(e,t.children)}))},openDialog:function(){var e=this;this.checkedKeys=[],this.$nextTick((function(){if(e.editRoles.id){var t;e.addRoleForm=JSON.parse(JSON.stringify(e.editRoles)),null===(t=e.editRoles.permissionIds)||void 0===t||t.forEach((function(t){e.checked(t,e.menu)})),e.$refs.tree.setCheckedNodes(e.checkedKeys);e.$refs.tree.getCheckedNodes(e.menu).length;79===e.checkedKeys.length?e.isAll=!0:e.isAll=!1}})),this.dialogVisible=!0}}},f=d,m=(r("6176"),r("2877")),p=Object(m["a"])(f,n,o,!1,null,"5a3b76c9",null),g=p.exports,h={name:"Role",components:{Detail:g},data:function(){return{editRoles:{},loading:!1,list:[],pageInfo:{start:1,limit:10},total:0}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.findRolesByPage();case 1:case"end":return t.stop()}}),t)})))()},methods:{add:function(){this.editRoles={},this.$refs.editRoles.clearAll(),this.$refs.editRoles.openDialog()},getBrandList:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var i,a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.id?c["f"]:c["e"],r.next=3,i(e);case 3:if(a=r.sent,s=a.success,n=a.message,s){r.next=8;break}return r.abrupt("return",t.$message.error(n));case 8:t.$message.success("保存成功"),t.$router.go(0);case 10:case"end":return r.stop()}}),r)})))()},edit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var i,a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["b"])(e.id);case 2:if(i=r.sent,a=i.success,s=i.data,n=i.message,a){r.next=8;break}return r.abrupt("return",t.$message.error(n));case 8:e.permissionIds=s.role.permissionIds,t.editRoles=e,t.$refs.editRoles.openDialog();case 11:case"end":return r.stop()}}),r)})))()},del:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var i,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["d"])(e.id);case 2:if(i=r.sent,a=i.success,s=i.message,a){r.next=7;break}return r.abrupt("return",t.$message.error(s));case 7:t.$message.success("删除成功"),t.findRolesByPage();case 9:case"end":return r.stop()}}),r)})))()},findRolesByPage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(c["c"])(e.pageInfo.start,e.pageInfo.limit);case 3:if(r=t.sent,r.success){t.next=6;break}return t.abrupt("return",e.$message.error(r.message));case 6:e.loading=!1,e.total=r.data.total,e.list=r.data.rows;case 9:case"end":return t.stop()}}),t)})))()},SizeChange:function(e){this.pageInfo.limit=e,this.findRolesByPage()},CurrentChange:function(e){this.pageInfo.start=e,this.findRolesByPage()}}},b=h,v=(r("5b7b"),Object(m["a"])(b,i,a,!1,null,"4db65d42",null));t["default"]=v.exports},"1f91":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.isFlex?"wrapper-upload":""},[r("el-upload",{ref:"uploadCoverImg",staticClass:"upload-demo",attrs:{"list-type":e.listType,headers:{token:e.token},"on-success":e.handleSuccess,"before-upload":e.beforeUpload,multiple:e.isMultiple,limit:e.limitNumber,"show-file-list":!1,action:e.baseUrl+e.uploadUrl,"on-change":e.changeUpload}},["text"==e.listType?r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]):e._e(),"picture-card"==e.listType||"picture"==e.listType?r("el-button",{staticStyle:{border:"none"},attrs:{icon:"el-icon-plus",size:"small",plain:""}}):e._e(),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传图片格式文件，且不超过1.5M "),e.isMultiple?r("span",[e._v("文件不能超过"+e._s(e.limitNumber)+"个")]):e._e()])],1),e.isShowImg&&!e.isMultiple?r("div",{staticClass:"icon-wrapper"},[e.imgSrcStr||e.imgSrc?r("img",{staticClass:"cover-img",attrs:{src:e.imgSrc||e.imgSrcStr,alt:""}}):e._e(),e.imgSrc?r("i",{staticClass:"el-icon-circle-close",attrs:{slot:"reference"},on:{click:e.removeCoverImg},slot:"reference"}):e._e()]):e._e(),e.isShowImg&&e.isMultiple?r("div",{staticClass:"icon-wrapper",class:e.isFlex?"wrapper-img":""},e._l(e.picList.length>0?e.picList:e.imgSrcList,(function(t,i){return r("div",{key:i,staticClass:"multImg"},[r("img",{staticClass:"cover-img",attrs:{src:t,alt:""}}),e.picList.length>0?r("i",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.removeCoverImg(i)}}}):e._e()])})),0):e._e()],1)},a=[],s=(r("a9e3"),r("a434"),r("5f87")),n={name:"UploadImg",props:{isShowImg:{type:Boolean,default:!1},uploadUrl:{type:String,default:"/lejuAdmin/material/uploadFileOss"},listType:{type:String,default:"text"},isWho:{type:String,default:""},isFlex:{type:Boolean,default:!0},isMultiple:{type:Boolean,default:!1},limitNumber:{type:Number,default:5},imgSrcStr:{type:String,default:""},imgSrcList:{type:Array,default:function(){return[]}}},mounted:function(){},data:function(){return{baseUrl:"https://leju.bufan.cloud",picList:[],imgSrc:""}},computed:{token:function(){return Object(s["b"])()}},methods:{changeUpload:function(e,t){},handleSuccess:function(e,t,r){var i=e.success,a=e.data,s=e.message;if(i){var n=a.fileUrl;this.picList.push(n),this.$message.success("上传成功!");var o={url:n,isWho:this.isWho};this.$emit("reciveImgSrc",o),this.imgSrc=n,this.isMultiple&&this.$emit("reciveImgSrcList",this.picList)}else this.$message.error(s)},beforeUpload:function(e){var t=/image\/(jpeg|png|jpg)/g,r=t.test(e.type),i=e.size/1024/1024<1.5;return r||this.$message.error("只能上传图片格式"),i||this.$message.error("上传头像图片大小不能超过1.5MB!"),r&&i},removeCoverImg:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"删除成功!"}),t.imgSrc="",t.isMultiple&&t.picList.splice(e,1)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},o=n,l=(r("f2a8"),r("2877")),c=Object(l["a"])(o,i,a,!1,null,"0edec22a",null);t["a"]=c.exports},"5b7b":function(e,t,r){"use strict";r("f5f5")},6176:function(e,t,r){"use strict";r("6221")},6221:function(e,t,r){},8454:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return n}));var i=r("0c6d");function a(){return Object(i["a"])({url:"/admin/sysAuth/permission/findAllPermissions"})}function s(e){return Object(i["a"])({url:"/admin/sysAuth/permission/saveInitMenus",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/admin/sysAuth/permission/save",method:"POST",data:e})}},"97a6":function(e,t,r){},a434:function(e,t,r){"use strict";var i=r("23e7"),a=r("23cb"),s=r("a691"),n=r("50c4"),o=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),d=r("ae40"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var r,i,u,d,f,m,v=o(this),y=n(v.length),w=a(e,y),k=arguments.length;if(0===k?r=i=0:1===k?(r=0,i=y-w):(r=k-2,i=g(p(s(t),0),y-w)),y+r-i>h)throw TypeError(b);for(u=l(v,i),d=0;d<i;d++)f=w+d,f in v&&c(u,d,v[f]);if(u.length=i,r<i){for(d=w;d<y-i;d++)f=d+i,m=d+r,f in v?v[m]=v[f]:delete v[m];for(d=y;d>y-i+r;d--)delete v[d-1]}else if(r>i)for(d=y-i;d>w;d--)f=d+i-1,m=d+r-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<r;d++)v[d+w]=arguments[d+2];return v.length=y-i+r,u}})},a9e3:function(e,t,r){"use strict";var i=r("83ab"),a=r("da84"),s=r("94ca"),n=r("6eeb"),o=r("5135"),l=r("c6b6"),c=r("7156"),u=r("c04e"),d=r("d039"),f=r("7c73"),m=r("241c").f,p=r("06cf").f,g=r("9bf2").f,h=r("58a8").trim,b="Number",v=a[b],y=v.prototype,w=l(f(y))==b,k=function(e){var t,r,i,a,s,n,o,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+c}for(s=c.slice(2),n=s.length,o=0;o<n;o++)if(l=s.charCodeAt(o),l<48||l>a)return NaN;return parseInt(s,i)}return+c};if(s(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,R=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof R&&(w?d((function(){y.valueOf.call(r)})):l(r)!=b)?c(new v(k(t)),r,R):k(t)},C=i?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;C.length>S;S++)o(v,x=C[S])&&!o(R,x)&&g(R,x,p(v,x));R.prototype=y,y.constructor=R,n(a,b,R)}},daea:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return c}));r("99af");var i=r("0c6d");function a(){return Object(i["a"])({url:"/admin/sysAuth/role/findAllRoles"})}function s(e){return Object(i["a"])({url:"/admin/sysAuth/role/findRolePermissions/".concat(e)})}function n(e,t){return Object(i["a"])({url:"/admin/sysAuth/role/findRolesByPage/".concat(e,"/").concat(t)})}function o(e){return Object(i["a"])({url:"/admin/sysAuth/role/removeRole/".concat(e),method:"delete"})}function l(e){return Object(i["a"])({url:"/admin/sysAuth/role/saveRolePermissions",method:"POST",data:e})}function c(e){return Object(i["a"])({url:"/admin/sysAuth/role/updateRolePermissions",method:"PUT",data:e})}},f2a8:function(e,t,r){"use strict";r("97a6")},f5f5:function(e,t,r){}}]);